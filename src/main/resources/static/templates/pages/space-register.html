<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>팝업 공간 대여 등록</title>

    <!-- 공통 레이아웃 -->
    <link rel="stylesheet" href="/css/layout.css" />
    <!-- 페이지 전용 CSS(있으면) -->
    <link rel="stylesheet" href="/css/space-register.css" />
</head>
<body>
<div class="mobile-container">
    <div id="header-container"></div>

    <main class="main-content">
        <div class="space-register-container" style="padding:20px;background:#fff;margin-top:10px;padding-bottom:100px">
            <h1 class="page-title">팝업 공간 대여 등록</h1>

            <form id="spaceForm">
                <div class="form-group">
                    <label for="title">글 제목</label>
                    <input type="text" id="title" name="title" placeholder="등록글 제목을 입력해 주세요" required />
                    <div class="error" id="titleError"></div>
                </div>

                <div class="image-upload" style="display:flex;flex-direction:column;align-items:center;margin:16px 0 28px">
                    <div id="imagePreview" class="image-preview"
                         style="width:120px;height:120px;border:2px dashed #ddd;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden"
                         onclick="document.getElementById('imageFile').click()">
                        <span style="font-size:38px;color:#9aa">📷</span>
                    </div>
                    <input type="file" id="imageFile" accept="image/*" style="display:none" />
                </div>

                <div class="form-group">
                    <label for="address">주소</label>
                    <input type="text" id="address" name="address" placeholder="주소를 입력하세요" required />
                    <div class="error" id="addressError"></div>
                </div>

                <div class="form-group">
                    <label for="areaSize">면적 (㎡)</label>
                    <input type="number" id="areaSize" name="areaSize" placeholder="예: 120" required />
                    <div class="error" id="areaSizeError"></div>
                </div>

                <div class="form-group">
                    <label for="startDate">임대 시작일</label>
                    <input type="date" id="startDate" name="startDate" required />
                    <div class="error" id="startDateError"></div>
                </div>

                <div class="form-group">
                    <label for="endDate">임대 종료일</label>
                    <input type="date" id="endDate" name="endDate" required />
                    <div class="error" id="endDateError"></div>
                </div>

                <div class="form-group">
                    <label for="rentalFee">임대료 (하루 만원 단위)</label>
                    <input type="number" id="rentalFee" name="rentalFee" placeholder="예: 50" required />
                    <div class="error" id="rentalFeeError"></div>
                </div>

                <div class="form-group">
                    <label for="contactPhone">문의 전화번호</label>
                    <input type="tel" id="contactPhone" name="contactPhone" placeholder="010-1234-5678" required />
                    <div class="error" id="contactPhoneError"></div>
                </div>

                <div class="form-group">
                    <label for="description">상세 설명</label>
                    <textarea id="description" name="description" rows="4" placeholder="공간 상세 내용을 입력하세요"></textarea>
                    <div class="error" id="descriptionError"></div>
                </div>

                <button type="submit" class="submit-btn" style="width:100%;padding:14px 16px;border:0;border-radius:8px;background:#6366f1;color:#fff;font-weight:700">등록하기</button>
            </form>
        </div>
    </main>

    <div id="footer-container"></div>
</div>

<!-- 공통/페이지 스크립트 -->
<script src="/js/templateLoader.js"></script>
<script src="/js/api.js"></script>
<script src="/js/layout.js"></script>
<script src="/js/space-register.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', async () => {
        await loadComponents();
        initializeLayout();

        // 파일 미리보기(간단)
        const file = document.getElementById('imageFile');
        const prev = document.getElementById('imagePreview');
        if (file && prev) {
            file.addEventListener('change', e => {
                const f = e.target.files?.[0]; if (!f) return;
                const img = new Image(); img.onload = () => { prev.innerHTML = ''; prev.appendChild(img); };
                img.style.width='100%'; img.style.height='100%'; img.style.objectFit='cover';
                img.src = URL.createObjectURL(f);
            });
        }

        window.SpaceRegisterPage?.init?.();
    });
</script>
</body>
</html>
