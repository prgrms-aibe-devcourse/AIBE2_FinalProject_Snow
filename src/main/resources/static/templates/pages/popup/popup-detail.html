<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">POPIN - íŒì—… ìƒì„¸</title>

    <!-- ê³µí†µ ë ˆì´ì•„ì›ƒ CSS -->
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/popup-detail.css">
</head>
<body>
<div class="mobile-container">
    <!-- í—¤ë” ì˜ì—­ -->
    <div id="header-container">
        <!-- JavaScriptë¡œ ë™ì  ë¡œë“œ -->
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <main class="main-content" id="main-content">
        <!-- íŒì—… ìƒì„¸ í˜ì´ì§€ ì½˜í…ì¸  -->
        <div id="popup-detail-loading" class="loading-container">
            <div class="loading"></div>
        </div>

        <div id="popup-detail-content" class="popup-detail-page" style="display: none;">
            <!-- ë©”ì¸ ì´ë¯¸ì§€ ì„¹ì…˜ -->
            <div class="popup-main-image">
                <img id="popup-main-img" src="" alt="íŒì—… ì´ë¯¸ì§€" class="main-image">
                <div class="image-overlay">
                    <div class="action-buttons">
                        <button class="action-btn" id="share-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                                <polyline points="16,6 12,2 8,6"></polyline>
                                <line x1="12" y1="2" x2="12" y2="15"></line>
                            </svg>
                        </button>
                        <button class="action-btn" id="bookmark-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- íŒì—… ì •ë³´ ì„¹ì…˜ -->
            <div class="popup-info-section">
                <h1 id="popup-title" class="popup-title"></h1>

                <div class="popup-dates">
                    <div class="date-info">
                        <span id="popup-period" class="period-text"></span>
                    </div>
                    <div class="hours-info">
                        <div id="popup-hours" class="hours-text"></div>
                    </div>
                </div>

                <!-- íƒœê·¸ ì„¹ì…˜ -->
                <div id="popup-tags" class="popup-tags"></div>

                <!-- ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ -->
                <button id="reservation-btn" class="reservation-btn">
                    ì˜ˆì•½í•˜ê¸°
                </button>
            </div>

            <!-- ë¦¬ë·° ì„¹ì…˜ -->
            <div class="reviews-section">
                <div class="section-header">
                    <h2>Reviews</h2>
                    <button class="write-review-btn">+ ë¦¬ë·° ì‘ì„±</button>
                </div>

                <!-- í‰ì  ìš”ì•½ -->
                <div class="rating-summary">
                    <div class="stars-container">
                        <div class="stars">
                            <span class="star filled">â˜…</span>
                            <span class="star filled">â˜…</span>
                            <span class="star filled">â˜…</span>
                            <span class="star filled">â˜…</span>
                            <span class="star">â˜…</span>
                        </div>
                        <span class="review-count">(4)</span>
                    </div>
                </div>

                <!-- ë¦¬ë·° ëª©ë¡ -->
                <div class="reviews-list">
                    <div class="review-item">
                        <div class="review-rating">
                            <div class="stars">
                                <span class="star filled">â˜…</span>
                                <span class="star filled">â˜…</span>
                                <span class="star filled">â˜…</span>
                                <span class="star filled">â˜…</span>
                                <span class="star filled">â˜…</span>
                            </div>
                            <span class="review-date">ì‹ ê³  ></span>
                        </div>
                        <h3 class="review-title">ì •ë§ ì¬ë¯¸ìˆëŠ” íŒì—…ì´ì—ˆì–´ìš”!</h3>
                        <p class="review-body">ìš”ì•„ì • íŒì—… ì •ë§ ê·€ì—½ê³  ì˜ˆë»¤ì–´ìš”. í¬í† ì¡´ë„ ë§ê³  êµ¿ì¦ˆë„ ë‹¤ì–‘í•´ì„œ ë§Œì¡±ìŠ¤ëŸ¬ì› ìŠµë‹ˆë‹¤.</p>
                        <div class="reviewer-info">
                            <img src="https://via.placeholder.com/40x40/4B5AE4/ffffff?text=ğŸ‘¤" alt="ë¦¬ë·°ì–´" class="reviewer-avatar">
                            <div class="reviewer-details">
                                <span class="reviewer-name">ê¹€ë¯¼ì§€</span>
                                <span class="review-date">2025.08.15</span>
                            </div>
                        </div>
                    </div>

                    <div class="review-item">
                        <div class="review-rating">
                            <div class="stars">
                                <span class="star filled">â˜…</span>
                                <span class="star filled">â˜…</span>
                                <span class="star filled">â˜…</span>
                                <span class="star filled">â˜…</span>
                                <span class="star">â˜…</span>
                            </div>
                            <span class="review-date">ì‹ ê³  ></span>
                        </div>
                        <h3 class="review-title">ê·€ì—¬ìš´ êµ¿ì¦ˆë“¤ì´ ë§ì•„ìš”</h3>
                        <p class="review-body">íŠ¹íˆ ì¸í˜•ì´ë‘ í‚¤ë§ì´ ë„ˆë¬´ ê·€ì—¬ì›Œì„œ ë‹¤ ì‚¬ê³  ì‹¶ì—ˆì–´ìš”. ë‹¤ìŒì— ë˜ ê°€ê³  ì‹¶ìŠµë‹ˆë‹¤!</p>
                        <div class="reviewer-info">
                            <img src="https://via.placeholder.com/40x40/8b5cf6/ffffff?text=ğŸ‘¤" alt="ë¦¬ë·°ì–´" class="reviewer-avatar">
                            <div class="reviewer-details">
                                <span class="reviewer-name">ì´ì„œì—°</span>
                                <span class="review-date">2025.08.10</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="load-more-btn">+ ë”ë³´ê¸°</button>
            </div>

            <!-- ìœ ì‚¬í•œ íŒì—… ìŠ¤í† ì–´ ì„¹ì…˜ -->
            <div class="similar-popups-section">
                <h2 class="section-title">ìœ ì‚¬í•œ íŒì—… ìŠ¤í† ì–´</h2>
                <div id="similar-popups-grid" class="similar-popups-grid">
                    <!-- ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>

        <div id="popup-detail-error" class="error-container" style="display: none;">
            <p class="alert alert-error">íŒì—… ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
            <button class="btn btn-primary" onclick="window.history.back()">ëŒì•„ê°€ê¸°</button>
        </div>
    </main>

    <!-- í‘¸í„° ì˜ì—­ -->
    <div id="footer-container">
        <!-- JavaScriptë¡œ ë™ì  ë¡œë“œ -->
    </div>
</div>

<!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
<script src="/js/templateLoader.js"></script>
<script src="/js/api.js"></script>
<script src="/js/layout.js"></script>
<script src="/js/popup-list.js"></script>
<script src="/js/popup-search.js"></script>
<script src="/js/map.js"></script>
<script src="/js/pages.js"></script>
<script src="/js/popup-detail.js"></script>

<!-- ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” -->
<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ í—¤ë”/í‘¸í„° ë¡œë“œ ë° íŒì—… ìƒì„¸ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', async function() {
        await loadComponents();
        initializeLayout();

        // URLì—ì„œ íŒì—… ID ê°€ì ¸ì˜¤ê¸° (ìƒˆë¡œìš´ ê²½ë¡œ êµ¬ì¡°)
        const pathParts = window.location.pathname.split('/');
        const popupId = pathParts[2]; // /popup/{id} ì—ì„œ {id} ë¶€ë¶„

        if (popupId && /^\d+$/.test(popupId)) {
            const manager = new PopupDetailManager(popupId);
            await manager.initialize();
        } else {
            // íŒì—… IDê°€ ì—†ê±°ë‚˜ ì˜ëª»ëœ ê²½ìš°
            document.getElementById('popup-detail-error').style.display = 'flex';
            const errorText = document.querySelector('#popup-detail-error .alert');
            if (errorText) {
                errorText.textContent = 'ì˜ëª»ëœ íŒì—… IDì…ë‹ˆë‹¤.';
            }
        }
    });
</script>
</body>
</html>